version: '3.1'

services:
  gradle:
    image: openjdk:17-jdk-slim
    ports:
      - "8080:8080"
    depends_on:
      - "mongo"
      - "dind-service"
  dind-service:
    image: docker:dind
    privileged: true
    ports:
      - "127.0.0.1:2375:2375"
      - "127.0.0.1:2376:2376"
  mongo:
    image: mongo
    restart: always